{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["!function n(o,a,s){function r(i,e){if(!a[i]){if(!o[i]){var t=\"function\"==typeof require&&require;if(!e&&t)return t(i,!0);if(d)return d(i,!0);throw(e=new Error(\"Cannot find module '\"+i+\"'\")).code=\"MODULE_NOT_FOUND\",e}t=a[i]={exports:{}},o[i][0].call(t.exports,function(e){return r(o[i][1][e]||e)},t,t.exports,n,o,a,s)}return a[i].exports}for(var d=\"function\"==typeof require&&require,e=0;e<s.length;e++)r(s[e]);return r}({1:[function(e,i,t){window.Vimeify=window.hasOwnProperty(\"Vimeify\")?window.Vimeify:{},window.Vimeify.Loader='<div class=\"sweet_loader\"><svg viewBox=\"0 0 140 140\" width=\"140\" height=\"140\"><g class=\"outline\"><path d=\"m 70 28 a 1 1 0 0 0 0 84 a 1 1 0 0 0 0 -84\" stroke=\"rgba(0,0,0,0.1)\" stroke-width=\"4\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></g><g class=\"circle\"><path d=\"m 70 28 a 1 1 0 0 0 0 84 a 1 1 0 0 0 0 -84\" stroke=\"#71BBFF\" stroke-width=\"4\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-dashoffset=\"200\" stroke-dasharray=\"300\"></path></g></svg></div>';function l(e,i){return'<div class=\"notice notice-'+i+' is-dismissible vimeify-clear-padding\"><p>'+e+\"</p></div>\\n\"}var a,f,n,d,o,s,r,c,m,u,y,v;function p(e){if(navigator.clipboard)navigator.clipboard.writeText(e).then(function(){console.log(\"Async: Copying to clipboard was successful!\")},function(e){console.error(\"Async: Could not copy text: \",e)});else{var i=document.createElement(\"textarea\");i.value=e,i.style.top=\"0\",i.style.left=\"0\",i.style.position=\"fixed\",document.body.appendChild(i),i.focus(),i.select();try{document.execCommand(\"copy\")}catch(e){console.error(\"Fallback: Oops, unable to copy\",e)}document.body.removeChild(i)}}(a=jQuery).fn.ajaxSelect=function(e,i){return e&&i?jQuery.fn.select2?(a.extend(e={ajax:{url:e,dataType:\"json\",delay:250,type:\"POST\",headers:{Accept:\"application/json\"},data:function(e){return{search_str:e.term,page_number:e.page||1}},processResults:function(e){var i=[];if(e.success){if(e.data.hasOwnProperty(\"results\"))return e.data;for(var t in e.data){var n=e.data[t].id,t=e.data[t].name;i.push({id:n,text:t})}}return{results:i}},cache:!0},language:{errorLoading:function(){return Vimeify_Admin.phrases.select2.errorLoading},inputTooLong:function(e){var e=e.input.length-e.maximum,i=(i=Vimeify_Admin.phrases.select2.inputTooShort).replace(\"{number}\",e);return 1!=e&&(i+=\"s\"),i},inputTooShort:function(e){e=e.minimum-e.input.length;return Vimeify_Admin.phrases.select2.inputTooShort.replace(\"{number}\",e)},loadingMore:function(){return Vimeify_Admin.phrases.select2.loadingMore},maximumSelected:function(e){var i=(i=Vimeify_Admin.phrases.select2.maximumSelected).replace(\"{number}\",e.maximum);return 1!=e.maximum&&(i+=\"s\"),i},noResults:function(){return Vimeify_Admin.phrases.select2.noResults},searching:function(){return Vimeify_Admin.phrases.select2.searching},removeAllItems:function(){return Vimeify_Admin.phrases.select2.removeAllItems},removeItem:function(){return Vimeify_Admin.phrases.select2.removeItem},search:function(){return Vimeify_Admin.phrases.select2.search}},minimumInputLength:2,width:\"100%\",allowClear:!0},i),a(this).select2(e),a(this)):(console.log(\"Video Uploads for Vimeo: Select2 library is not initialized.\"),!1):(console.log(\"Video Uploads for Vimeo: Ajax Select2 not intialized correctly.\"),!1)},a(document).find(\".vimeify-select2\").each(function(){var e={},i=a(this).data(\"placeholder\"),t=a(this).data(\"action\"),n=Vimeify.ajax_url+\"?action=\"+t+\"&_wpnonce=\"+Vimeify.nonce,o=a(this).data(\"minInputLength\");i&&(e.placeholder=i),o&&(e.minimumInputLength=o),t&&n&&a(this).ajaxSelect(n,e)}),a(document).on(\"change\",\".vimeify-select2-clearable\",function(){a(this).val()?a(\".vimeify-clear-selection\").show():a(\".vimeify-clear-selection\").hide()}),a(document).on(\"click\",\".vimeify-clear-selection\",function(e){e.preventDefault();e=a(this).data(\"target\");a(e).each(function(e){a(this).val(null).trigger(\"change\")})}),f=jQuery,(n=f(\"#folder_uri\")).length&&n.ajaxSelect(),jQuery(\".vimeify-video-upload\").submit(function(e){var i,t,n,o,a=f(this),s=a.find(\".vimeify-loader\"),r=a.find(\"button[type=submit]\"),d=a.find(\".vimeify-progress-bar\"),c=new FormData(this),m=c.get(\"vimeo_video\");return WPVimeoVideos.Uploader.validateVideo(m)?(i=c.get(\"vimeo_title\"),t=c.get(\"vimeo_description\"),c=(c=c.get(\"vimeo_view_privacy\"))||Vimeify.default_privacy,n=function(e,i){var t=e.find(\".vimeify-notice-wrapper\"),n=(0<t.length&&t.remove(),\"\");try{var o=JSON.parse(i);if(o.hasOwnProperty(\"invalid_parameters\"))for(var a in o.invalid_parameters)n+=\"<li>\"+(o.invalid_parameters[a].error+\" \"+o.invalid_parameters[a].developer_message)+\"</li>\";n='<p style=\"margin-bottom: 0;font-weight: bold;\">'+Vimeify.correct_errors+':</p><ul style=\"list-style: circle;padding-left: 20px;\">'+n+\"</ul>\"}catch(e){n=i}e.prepend(l(n,\"error\")),e.find(\".vimeify-loader\").css({display:\"none\"}),e.find(\"button[type=submit]\").prop(\"disabled\",!1)},o=function(e,i){e.is(\":hidden\")&&e.show(),e.find(\".vimeify-progress-bar-inner\").css({width:i+\"%\"}),e.find(\".vimeify-progress-bar-value\").text(i+\"%\")},new WPVimeoVideos.Uploader(Vimeify.access_token,m,{title:i,description:t,privacy:c,wp:{notify_endpoint:Vimeify.ajax_url+\"?action=vimeify_store_upload&hook_type=1&source=Backend.Form.Upload&_wpnonce=\"+Vimeify.nonce},beforeStart:function(){s.css({display:\"inline-block\"}),r.prop(\"disabled\",!0)},onProgress:function(e,i){e=(e/i*100).toFixed(2);o(d,e)},onSuccess:function(e,i){var t=e.success?\"success\":\"error\",e=e.data.message,n=a.find(\".vimeify-notice-wrapper\");0<n.length&&n.remove(),a.prepend(l(e,t)),setTimeout(function(){a.get(0).reset(),s.css({display:\"none\"}),r.prop(\"disabled\",!1),o(d,0),d.hide()},1e3)},onError:function(e){n(a,e)},onVideoCreateError:function(e){n(a,e)},onWPNotifyError:function(e){n(a,e)}}).start()):swal.fire(Vimeify.sorry,Vimeify.upload_invalid_file,\"error\"),!1}),(d=jQuery)(document).on(\"click\",\".dg-vimeo-delete\",function(e){var t,n,i,o,a=d(this).data(\"can-delete\"),s=d(this).data(\"vimeo-uri\"),r=d(this).data(\"id\");a?(t=s,n=r,i=\"list\",o=d(this),swal.fire({title:Vimeify.delete_confirm_title,text:Vimeify.delete_confirm_desc,type:\"warning\",showCancelButton:!0,confirmButtonText:Vimeify.confirm,cancelButtonText:Vimeify.cancel,showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(i,e){d.ajax({type:\"POST\",url:Vimeify.ajax_url+\"?action=vimeify_handle_delete&_wpnonce=\"+Vimeify.nonce,data:{vimeo_uri:t,post_id:n},success:function(e){i(e)},error:function(){e(\"HTTP Error\")}})})},allowOutsideClick:!1}).then(function(e){e.value.data.hasOwnProperty(\"local_delete\")&&e.value.data.local_delete&&\"list\"===i&&o&&o.closest(\"tr\").detach().remove(),e.value.success?swal.fire({title:e.value.data.title,type:\"success\",text:e.value.data.message,showCancelButton:!1,confirmButtonText:Vimeify.close,allowOutsideClick:!1}):swal.fire({title:e.value.data.title,type:\"error\",text:e.value.data.message,showCancelButton:!1,confirmButtonText:Vimeify.close,allowOutsideClick:!1})})):swal.fire(Vimeify.sorry,Vimeify.delete_not_allowed,\"error\")}),(o=jQuery)(document).on(\"change\",\".vimeify-conditional-field\",function(e){var i=o(this).data(\"target\");o(this).val()===o(this).data(\"show-target-if-value\")?o(i).show():o(i).hide()}),(s=jQuery)(document).on(\"submit\",\"#vimeify-video-save-basic\",function(e){var i=s(this).serialize(),t=s(this).find(\"button[type=submit]\");return s.ajax({url:Vimeify.ajax_url+\"?action=vimeify_handle_basic_edit&_wpnonce=\"+Vimeify.nonce,type:\"POST\",data:i,beforeSend:function(){t.prepend('<span class=\"dashicons dashicons-update vimeify-dashicon vimeify-spin\"></span>')},success:function(e){var i=e.success?Vimeify.success:Vimeify.sorry;swal.fire(i,e.data.message,e.success?\"success\":\"error\")},error:function(){swal.fire(Vimeify.sorry,Vimeify.http_error,\"error\")},complete:function(){var e=t.find(\".vimeify-dashicon\");e.removeClass(\"dashicons-update vimeify-spin\").addClass(\"dashicons-yes\"),setTimeout(function(){e.detach().remove()},1e3)}}),!1}),s(document).on(\"input\",\"#privacy_embed_domain\",function(e){var i=s(this).closest(\"form\").find(\"button[name=admin_action][value=add_domain]\"),t=s(this).val();i.length&&i.prop(\"disabled\",\"\"===t)}),s(document).on(\"submit\",\"#vimeify-video-save-embed-privacy\",function(e){var i=s(this).serialize(),t=s(this).find(\"button[type=submit].button-primary\"),n=s(this).find(\".privacy-embed-whitelisted-domains\");return s.ajax({url:Vimeify.ajax_url+\"?action=vimeify_handle_embed_privacy&_wpnonce=\"+Vimeify.nonce,type:\"POST\",data:i,beforeSend:function(){t.prepend('<span class=\"dashicons dashicons-update vimeify-dashicon vimeify-spin\"></span>')},success:function(e){var i=e.success?\"success\":\"error\",t=e.data.domain_added;e.success&&e.data.hasOwnProperty(\"domain_added\")&&n.html().indexOf(t)<0&&n.append(\"<li>\"+t+' <a href=\"#\" class=\"submitdelete vimeify-delete-domain\" data-domain=\"'+t+'\" data-uri=\"'+e.data.uri+'\">('+Vimeify.remove_lower+\")</a></li>\"),e.data.hasOwnProperty(\"message\")&&(t=e.success?Vimeify.success:Vimeify.sorry,swal.fire(t,e.data.message,i))},error:function(){swal.fire(Vimeify.sorry,Vimeify.http_error,\"error\")},complete:function(){var e=t.find(\".vimeify-dashicon\");e.removeClass(\"dashicons-update vimeify-spin\").addClass(\"dashicons-yes\"),setTimeout(function(){e.detach().remove()},1e3)}}),!1}),s(document).on(\"click\",\".vimeify-embed-privacy-whitelist button[name=admin_action]\",function(e){e.preventDefault();var i=s(this),e=s(this).closest(\".vimeify-embed-privacy-whitelist\"),t=e.find(\"#privacy_embed_domain\"),n=e.find(\"input[name=uri]\"),o=e.find(\".privacy-embed-whitelisted-domains\"),e={privacy_embed:\"whitelist\",privacy_embed_domain:t.val(),uri:n.val()};s.ajax({url:Vimeify.ajax_url+\"?action=vimeify_handle_embed_privacy&_wpnonce=\"+Vimeify.nonce,type:\"POST\",data:e,beforeSend:function(){i.prepend('<span class=\"dashicons dashicons-update vimeify-dashicon vimeify-spin\"></span>')},success:function(e){var i=e.success?\"success\":\"error\",t=e.data.domain_added;e.success&&(e.data.hasOwnProperty(\"domain_added\")&&o.html().indexOf(t)<0&&o.append(\"<li>\"+t+' <a href=\"#\" class=\"submitdelete vimeify-delete-domain\" data-domain=\"'+t+'\" data-uri=\"'+e.data.uri+'\">('+Vimeify.remove_lower+\")</a></li>\"),document.getElementById(\"vimeify-video-preview\").src=document.getElementById(\"vimeify-video-preview\").src),e.data.hasOwnProperty(\"message\")&&(t=e.success?Vimeify.success:Vimeify.sorry,swal.fire(t,e.data.message,i))},error:function(){swal.fire(Vimeify.sorry,Vimeify.http_error,\"error\")},complete:function(){var e=i.find(\".vimeify-dashicon\");e.removeClass(\"dashicons-update vimeify-spin\").addClass(\"dashicons-yes\"),t.val(\"\"),i.prop(\"disabled\",!0),setTimeout(function(){e.detach().remove()},1e3)}})}),s(document).on(\"click\",\".vimeify-delete-domain\",function(e){e.preventDefault();var i=s(this).closest(\"li\"),e=s(this).data(\"domain\"),t=s(this).data(\"uri\");s.ajax({url:Vimeify.ajax_url+\"?action=vimeify_delete_embed_privacy_domain&_wpnonce=\"+Vimeify.nonce,type:\"POST\",data:{domain:e,uri:t},success:function(e){e.success?i.detach().remove():swal.fire(Vimeify.sorry,Vimeify.delete_whitelist_domain_error,\"error\"),document.getElementById(\"vimeify-video-preview\").src=document.getElementById(\"vimeify-video-preview\").src},error:function(){swal.fire(Vimeify.sorry,Vimeify.http_error,\"error\")}})}),setTimeout(function(){s(document).find(\".vimeify-embed-container .fluid-width-video-wrapper\").removeClass(\"fluid-width-video-wrapper\")},100),s(document).on(\"submit\",\"#vimeify-video-save-folders\",function(e){var i=s(this).serialize(),t=s(this).find(\"button[type=submit]\");return s.ajax({url:Vimeify.ajax_url+\"?action=vimeify_handle_video_folder_set&_wpnonce=\"+Vimeify.nonce,type:\"POST\",data:i,beforeSend:function(){t.prepend('<span class=\"dashicons dashicons-update vimeify-dashicon vimeify-spin\"></span>')},success:function(e){var i=e.success?Vimeify.success:Vimeify.sorry;swal.fire(i,e.data.message,e.success?\"success\":\"error\")},complete:function(){var e=t.find(\".vimeify-dashicon\");e.removeClass(\"dashicons-update vimeify-spin\").addClass(\"dashicons-yes\"),setTimeout(function(){e.detach().remove()},1e3)}}),!1}),s(document).on(\"submit\",\"#vimeify-video-save-embed-preset\",function(e){var i=s(this).serialize(),t=s(this).find(\"button[type=submit]\");return s.ajax({url:Vimeify.ajax_url+\"?action=vimeify_handle_video_embed_preset_set&_wpnonce=\"+Vimeify.nonce,type:\"POST\",data:i,beforeSend:function(){t.prepend('<span class=\"dashicons dashicons-update vimeify-dashicon vimeify-spin\"></span>')},success:function(e){var i=e.success?Vimeify.success:Vimeify.sorry;swal.fire(i,e.data.message,e.success?\"success\":\"error\")},complete:function(){var e=t.find(\".vimeify-dashicon\");e.removeClass(\"dashicons-update vimeify-spin\").addClass(\"dashicons-yes\"),setTimeout(function(){e.detach().remove()},1e3)}}),!1}),(r=jQuery)(document).on(\"click\",\".vimeify-upload-attachment\",function(e){var i=r(this).data(\"id\"),t=\"\";if(Vimeify.upload_form_options.enable_view_privacy){var n,o=\"\";for(n in Vimeify.upload_form_options.privacy_view){var a=Vimeify.upload_form_options.privacy_view[n].name;o+=\"<option \"+(Vimeify.upload_form_options.privacy_view[n].available?\"\":\"disabled\")+\" \"+(Vimeify.upload_form_options.privacy_view[n].default?\"selected\":\"\")+' value=\"'+n+'\">'+a+\"</option>\"}t='    <div class=\"vimeify-vimeo-form-row\">\\n        <label for=\"vimeo_view_privacy\">'+Vimeify.privacy_view+'</label>\\n        <select class=\"form-control vimeify-w-100\" name=\"vimeo_view_privacy\" id=\"vimeo_view_privacy\">'+o+\"</select>    </div>\\n\"}swal.fire({showCloseButton:!0,showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,html:'<form class=\"vimeify-media-library-upload vimeify-text-left\" method=\"POST\">\\n    <div class=\"vimeify-vimeo-form-row\">\\n        <h4 for=\"vimeo_title\">'+Vimeify.upload_to_vimeo+'</h4>\\n    </div>\\n    <div class=\"vimeify-vimeo-form-row\">\\n        <label for=\"vimeo_title\">'+Vimeify.title+'</label>\\n        <input type=\"text\" class=\"form-control\" name=\"vimeo_title\" id=\"vimeo_title\">\\n    </div>\\n    <div class=\"vimeify-vimeo-form-row\">\\n        <label for=\"vimeo_description\">'+Vimeify.description+'</label>\\n        <textarea class=\"form-control\" rows=\"5\" name=\"vimeo_description\" id=\"vimeo_description\"></textarea>    </div>\\n'+t+'    <div class=\"vimeify-vimeo-form-row vimeify-vimeo-form-row-footer\">\\n        <input type=\"hidden\" name=\"attachment_id\" value=\"'+i+'\">\\n        <div class=\"vimeify-loader vimeify-loader-inline\" style=\"display: none;\"></div>        <button type=\"submit\" name=\"vimeo_upload\" class=\"button-primary button-small\" value=\"1\">'+Vimeify.upload+\"</button>\\n    </div>\\n</form>\"})}),(c=jQuery)(document).on(\"submit\",\".vimeify-media-library-upload\",function(e){var i=c(this).serialize(),t=c(this).find(\"input[name=attachment_id]\"),n=c(this).find(\"button[type=submit]\"),o=t.val(),a=c(this);return c.ajax({url:Vimeify.ajax_url+\"?action=vimeify_attachment2vimeo&_wpnonce=\"+Vimeify.nonce,type:\"POST\",data:i,beforeSend:function(){a.find(\".vimeify-loader\").show(),n.prop(\"disabled\",!0)},success:function(e){var i,t;e.success?(i=e.data.info_metabox_html,0<(t=c(\"#vimeify-mlmb-\"+o)).length&&t.html(i),swal.fire(Vimeify.success,e.data.message,\"success\")):swal.fire(Vimeify.error,e.data.message,\"error\"),a.find(\".vimeify-loader\").hide()},complete:function(){a.find(\".vimeify-loader\").hide(),n.prop(\"disabled\",!1)},error:function(){a.find(\".vimeify-loader\").hide(),n.prop(\"disabled\",!1),swal.fire(Vimeify.error,Vimeify.http_error,\"error\")}}),!1}),(m=jQuery)(document).on(\"click\",\".vimeify-delete-attachment\",function(e){var i=m(this).data(\"id\");swal.fire({showCloseButton:!0,showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,html:'<form class=\"vimeify-media-library-delete vimeify-text-left\" method=\"POST\">\\n\\t<div class=\"vimeify-vimeo-form-row\">\\n\\t\\t<label for=\"vimeo_title\">'+Vimeify.delete_confirmation+'</label>\\n\\t</div>\\n\\t<div class=\"vimeify-vimeo-form-row\">\\n\\t<input type=\"hidden\" name=\"attachment_id\" value=\"'+i+'\">\\n\\t<div class=\"vimeify-loader vimeify-loader-inline\" style=\"display: none;\"></div>\\t<button type=\"submit\" name=\"delete\" class=\"button-primary\" value=\"1\">'+Vimeify.delete_confirmation_yes+\"</button>\\n\\t</div>\\n</form>\"})}),(u=jQuery)(document).on(\"submit\",\".vimeify-media-library-delete\",function(e){var i=u(this).find(\"input[name=attachment_id]\"),t=u(this).find(\"button[type=submit]\"),n=i.val(),o=u(this),i=o.serialize();return u.ajax({url:Vimeify.ajax_url+\"?action=vimeify_attachment2vimeo_delete&_wpnonce=\"+Vimeify.nonce,type:\"POST\",data:i,beforeSend:function(){o.find(\".vimeify-loader\").show(),t.prop(\"disabled\",!0)},success:function(e){var i,t;e.success?(i=e.data.info_metabox_html,0<(t=u(\"#vimeify-mlmb-\"+n)).length&&t.html(i),swal.fire(Vimeify.success,e.data.message,\"success\")):swal.fire(Vimeify.error,e.data.message,\"error\"),o.find(\".vimeify-loader\").hide()},complete:function(){o.find(\".vimeify-loader\").hide(),t.prop(\"disabled\",!1)},error:function(){o.find(\".vimeify-loader\").hide(),t.prop(\"disabled\",!1),swal.fire(Vimeify.error,Vimeify.http_error,\"error\")}}),!1}),(y=jQuery)(document).on(\"click\",\".vimeify-problem-fix-trigger\",function(e){e.preventDefault();e=y(this).closest(\".vimeify-problem-wrapper\").find(\".vimeify-problem--fix\").text();swal.fire({showCloseButton:!0,showCancelButton:!1,showConfirmButton:!1,html:'<div class=\"vimeify-problem-solution\">\\n\\t<h2>'+Vimeify.problem_solution+\"</h2>\\n\\t<p>\"+e+\"</p>\\n</div>\"})}),(v=jQuery)(document).on(\"click\",\".vimeify-copy-embed-code\",function(e){var i=v(this);p(i.closest(\".column-embed\").find(\".embed-code\").text().trim()),i.removeClass(\"dashicons-admin-links\"),i.addClass(\"dashicons-yes\"),setTimeout(function(){i.addClass(\"dashicons-admin-links\"),i.removeClass(\"dashicons-yes\")},2e3)}),window.addEventListener(\"DOMContentLoaded\",e=>{window.Vimeify.AdminStats=function(){this.init=function(){var e=document.getElementById(\"vimeify-vimeo-stats\");e&&e.addEventListener(\"click\",function(e){e.preventDefault(),(new window.Vimeify.Http).get(Vimeify.ajax_url,{data:{action:\"vimeify_generate_stats\",_wpnonce:Vimeify.nonce},beforeStart:function(){swal.fire({html:\"<h4>\"+Vimeify.loading+\"</h4>\",onRender:function(){document.querySelector(\".swal2-content\").prepend(window.Vimeify.Loader)}})},success:function(e){swal.fire({html:e.data.html,showCloseButton:!0,showCancelButton:!1,showConfirmButton:!1})},complete:function(){}})})},this.init()},window.Vimeify.AdminSettings=function(){this.init=function(){var e=document.querySelectorAll(\".vimeify-settings-info\");console.log(e);for(var i=0;i<e.length;i++)e[i].addEventListener(\"click\",function(e){swal.fire({showCloseButton:!0,showCancelButton:!1,showConfirmButton:!1,html:'<div class=\"vimeify-problem-solution\">\\n\\t<h2>'+Vimeify.explanation+\"</h2>\\n\\t<p>\"+this.dataset.info+\"</p>\\n</div>\"})}.bind(e[i]))},this.init()},new window.Vimeify.AdminStats,new window.Vimeify.AdminSettings})},{}]},{},[1]);"],"file":"main.js"}